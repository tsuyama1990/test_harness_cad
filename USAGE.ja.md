# KiCadハーネス設計SaaS 利用ガイド

このドキュメントは、KiCadハーネス設計SaaSの利用方法を説明します。

## 目次

- [はじめに](#はじめに)
- [画面構成](#画面構成)
- [基本的な使い方](#基本的な使い方)
- [詳細な設計](#詳細な設計)
- [製造用データの出力](#製造用データの出力)
- [設計データの検証](#設計データの検証)

## はじめに

KiCadハーネス設計SaaSは、ワイヤーハーネスの設計、視覚化、および製造データ生成を効率化するためのWebベースのツールです。直感的なインターフェースを通じて、2Dおよび3D環境でハーネスを設計し、BOM（部品表）やカットリストなどの製造に必要なドキュメントを自動で出力することができます。

このツールは、設計プロセスを簡素化し、ヒューマンエラーを削減することで、製造現場の効率を大幅に向上させることを目的としています。

## 画面構成

本アプリケーションの編集画面は、主に3つのエリアで構成されています。

![画面構成](https://i.imgur.com/example.png) <!-- あとで実際のスクリーンショットに差し替える -->

1.  **サイドバー（画面左側）**
    -   **コンポーネントライブラリ**: 設計に使用するコネクタや電線などの部品を選択し、キャンバスに追加します。
    -   **設計データのエクスポート**: BOM、カットリスト、結線リストなど、各種製造用データを出力するためのボタンが配置されています。
    -   **プロジェクト設定**: プロジェクト名やリビジョンなど、全体に関わる設定を行います。

2.  **メインキャンバス（画面中央）**
    -   ハーネスの設計を行うメインの作業エリアです。
    -   2Dの結線図エディタと、3Dの配線経路ビューワを切り替えることができます。
    -   コンポーネントの配置、電線の配線、経路の編集などを直感的に行うことができます。

3.  **属性編集パネル（画面右側）**
    -   メインキャンバスで選択したコンポーネント（コネクタ、電線など）の詳細な属性を表示し、編集するためのパネルです。
    -   部品の型番、線の色や長さ、製造に関する特記事項などをここで設定します。

## 基本的な使い方

ここでは、簡単な2コネクタ間のハーネスを作成する手順を例に、基本的な操作方法を説明します。

### 1. コネクタの追加

1.  画面左側のサイドバーから「コンポーネントライブラリ」を開きます。
2.  使用したいコネクタをリストから探し、ドラッグ＆ドロップで中央のメインキャンバスに配置します。
3.  同様に、もう一つのコネクタもキャンバスに配置します。

### 2. 電線の配線

1.  一方のコネクタのピン（端子）にカーソルを合わせると、ピンがハイライトされます。
2.  ハイライトされたピンをクリックしたまま、もう一方のコネクタの接続したいピンまでドラッグします。
3.  接続先のピンでマウスボタンを離すと、2つのピンが電線で接続されます。

### 3. コンポーネントの編集

-   **移動**: キャンバス上のコネクタをドラッグすることで、任意の位置に移動できます。電線は自動的に追従します。
-   **削除**:
    1.  削除したいコネクタまたは電線をクリックして選択します。
    2.  選択状態で `Delete` キーを押すと、そのコンポーネントが削除されます。
    3.  または、右側の属性編集パネルの上部にある「削除」ボタンをクリックすることでも削除できます。

## 詳細な設計

基本的な結線情報を作成したら、次に各コンポーネントの詳細な属性を設定していきます。

### 1. 属性の編集

1.  編集したいコネクタまたは電線をキャンバス上でクリックして選択します。
2.  画面右側の属性編集パネルに、選択したコンポーネントの情報が表示されます。
3.  以下のような属性を編集できます。
    -   **コネクタ**:
        -   インスタンス名（例: `CONN1`）
        -   部品番号
    -   **電線**:
        -   部品番号（使用する電線の種類）
        -   色
        -   長さ（3D経路から自動計算されますが、手動での上書きも可能です）

### 2. 3Dでの配線経路編集

本ツールは、ハーネスの物理的な形状を定義するための3Dビューワを備えています。正確な電線長は、この3Dビューでの配線経路に基づいて自動的に計算されます。

1.  メインキャンバス上部のタブで「3Dビュー」を選択します。
2.  3D空間内に、コネクタが配置されています。
3.  電線を構成する各セグメント（点と点の間）をドラッグして、ハーネスが実際に通る経路（壁や固定具など）に合わせて形状を編集します。

## 製造用データの出力

ハーネスの設計が完了したら、製造に必要な各種ドキュメントを生成・出力できます。

1.  画面左側のサイドバーにある「エクスポート」セクションを開きます。
2.  目的のドキュメントのボタンをクリックすると、ファイルが生成され、ダウンロードが開始されます。

出力可能なドキュメントには、主に以下のものがあります。

-   **BOM (部品表)**: ハーネスの製造に必要なすべての部品（コネクタ、電線、端子など）のリストです。
-   **カットリスト / ストリップリスト**: 各電線の切断長、ストリップ長（被覆を剥く長さ）、使用する端子などの情報が記載されたリストです。
-   **結線リスト (From-Toリスト)**: どのコネクタのどのピンが、どの電線を通って、相手側のどのピンに接続されるかを示す一覧表です。
-   **マークチューブリスト**: 電線の識別に使用するマークチューブの印字内容リストです。
-   **フォームボード図 (PDF)**: 製造時にハーネスを組み立てるための、実寸大の治具図面です。

## 設計データの検証

設計ミスを防ぐため、本ツールには設計データの妥当性を検証する機能が搭載されています。

1.  サイドバーの「検証」ボタンをクリックします。
2.  システムが設計データを自動的にチェックし、問題が見つかった場合は「検証レポート」パネルにエラーや警告のリストを表示します。

例えば、以下のような項目がチェックされます。

-   ピンに接続されていない電線がないか
-   使用できないピン（NC: No Connection）に電線が接続されていないか
-   電線の太さと端子の許容電流が適合しているか

設計を完了し、製造データをエクスポートする前に、必ずこの検証機能を実行し、すべての問題が解決されていることを確認してください。
